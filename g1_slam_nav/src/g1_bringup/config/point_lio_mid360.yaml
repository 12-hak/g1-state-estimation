# Point-LIO config for Livox Mid-360 (use with livox_ros_driver2 msg_MID360_launch.py)
# Topics match livox_ros_driver2: /livox/lidar (CustomMsg), /livox/imu
# Copy to Jetson and tune extrinsic_T / extrinsic_R if using external IMU (e.g. G1 body).

/**:
  ros__parameters:
    common:
      lid_topic: "/livox/lidar"
      imu_topic: "/livox/imu"
      con_frame: false
      con_frame_num: 1
      cut_frame: false
      cut_frame_time_interval: 0.1
      time_lag_imu_to_lidar: 0.0

    preprocess:
      lidar_type: 1
      scan_line: 6
      timestamp_unit: 1   # 1 = millisecond (Livox CustomMsg)
      blind: 1.0

    mapping:
      imu_en: true
      start_in_aggressive_motion: false
      extrinsic_est_en: false
      imu_time_inte: 0.005
      # Tune for your IMU: Livox built-in (Mid-360) or G1 body. Saturation and units matter.
      satu_acc: 3.0
      satu_gyro: 17.5
      acc_norm: 1.0       # 1.0 = g, 9.81 = m/s^2
      lidar_meas_cov: 0.001
      acc_cov_output: 500.0
      gyr_cov_output: 1000.0
      b_acc_cov: 0.0001
      b_gyr_cov: 0.0001
      imu_meas_acc_cov: 0.1
      imu_meas_omg_cov: 0.1
      gyr_cov_input: 0.01
      acc_cov_input: 0.1
      plane_thr: 0.1
      match_s: 81.0
      fov_degree: 90.0
      det_range: 450.0
      gravity_align: true
      gravity: [ 0.0, 0.0, -9.810 ]
      gravity_init: [ 0.0, 0.0, -9.810 ]
      # LiDAR pose in IMU frame. Mid-360: IMU inside lidar â†’ identity/small. For G1 body IMU set lidar pose in base.
      extrinsic_T: [ 0.0, 0.0, 0.0 ]
      extrinsic_R: [ 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0 ]

    odometry:
      publish_odometry_without_downsample: false

    publish:
      path_en: true
      scan_publish_en: true
      scan_bodyframe_pub_en: false

    pcd_save:
      pcd_save_en: false
      interval: -1
